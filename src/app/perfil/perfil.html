<!-- RUTA: src/app/perfil/perfil.html -->

<div class="profile-card">
  <h2>Tu Perfil</h2>
  <p class="subtitle">Informaci贸n de tu cuenta de MediClean.</p>
  
  <!-- Usamos *ngIf para mostrar los datos solo cuando la variable 'user' ya no sea nula -->
  <div *ngIf="user; else loading">
    <div class="info-item">
      <label>Correo (Username)</label>
      <p>{{ user.email }}</p>
    </div>
    
    <div class="info-item">
      <label>Rol</label>
      <p>{{ user.rol }}</p>
    </div>
    
    <div class="info-item">
      <label>ID de Usuario</label>
      <p>#{{ user.id }}</p>
    </div>
  </div>

  <!-- 
    Esta plantilla se muestra mientras 'user' es nulo.
    Se activa con el 'else loading' del *ngIf de arriba.
  -->
  <ng-template #loading>
    <p *ngIf="!errorMessage" class="loading-message">Cargando informaci贸n del perfil...</p>
    <!-- Mostramos un mensaje de error si la petici贸n falla -->
    <p *ngIf="errorMessage" class="error-message">{{ errorMessage }}</p>
  </ng-template>

  <div class="danger-zone">
    <h3>Eliminar Cuenta</h3>
    <p>Esta acci贸n es permanente.</p>
    <button (click)="eliminarCuenta()" class="delete-button">Eliminar</button>
  </div>
</div>