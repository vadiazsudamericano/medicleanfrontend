<div class="historial-container">
  <h1>Historial de Escaneos</h1>

  <div *ngIf="cargando" class="mensaje">Cargando historial...</div>

  <div *ngIf="!cargando && historial.length === 0" class="mensaje">
    Aún no hay registros en el historial.
  </div>

  <div *ngIf="!cargando && historial.length > 0" class="lista-historial">
    <!-- Reemplazamos <li> por <a> para hacerlo clicable -->
    <a *ngFor="let item of historial"
       class="item-historial-link"
       [routerLink]="['/detalle-herramienta', item.herramienta.nombre]">
      
      <div class="info">
        <!-- Mostramos el nombre de la herramienta -->
        <span class="nombre">{{ item.herramienta.nombre }}</span>
        <!-- Mostramos el estado como una "píldora" de color -->
        <span class="estado-pill" [ngClass]="(item.estadoAlEscanear ?? 'no-registrado').toLowerCase().split(' ')[0] || ''">
          {{ item.estadoAlEscanear }}
        </span>
      </div>

      <div class="fecha">
        <!-- Usamos el pipe 'date' para formatear la fecha -->
        {{ item.fechaEscaneo | date:'dd/MM/yyyy h:mm a' }}
      </div>
    </a>
  </div>
</div>