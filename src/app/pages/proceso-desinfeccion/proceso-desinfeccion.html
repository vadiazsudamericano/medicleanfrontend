<div class="container mt-5">
    <div class="card text-center shadow-lg">
        <div class="card-header bg-primary text-white">
        <h2>Proceso de Desinfección</h2>
        </div>
        <div class="card-body p-5">

        <div *ngIf="temperaturaActual !== null; else noData">
            
            <h3 class="card-title text-muted">Temperatura Actual</h3>
            <p class="display-1 fw-bold text-primary">
            {{ temperaturaActual | number:'1.2-2' }} °C
            </p>

            <h3 class="card-title text-muted mt-4">Estado del Proceso</h3>

            <!-- ========================================================= -->
            <!-- ===           INICIO: NUEVA LÓGICA DE ALERTAS         === -->
            <!-- ========================================================= -->

            <!-- Usamos ngSwitch para mostrar diferentes diseños de alerta
                 según el valor de la variable 'estadoClase' -->
            <div [ngSwitch]="estadoClase">

              <!-- CASO 1: Alerta LLAMATIVA para PRECALENTAMIENTO -->
              <div *ngSwitchCase="'precalentamiento'" 
                   class="alert alert-llamativa alert-precalentamiento mt-2" role="alert">
                <i class="fas fa-pause-circle alert-icon"></i> <!-- Icono de pausa -->
                <div class="alert-text">
                  <h4 class="alert-heading fw-bold">¡Atención! Zona de Calentamiento</h4>
                  <p class="mb-0 fs-5">{{ mensajeEstado }}</p>
                </div>
              </div>
        
              <!-- CASO 2: Alerta LLAMATIVA para PELIGRO -->
              <div *ngSwitchCase="'peligro'" 
                   class="alert alert-llamativa alert-peligro mt-2" role="alert">
                <i class="fas fa-exclamation-triangle alert-icon"></i> <!-- Icono de advertencia -->
                <div class="alert-text">
                  <h4 class="alert-heading fw-bold">¡Peligro! Temperatura Excesiva</h4>
                  <p class="mb-0 fs-5">{{ mensajeEstado }}</p>
                </div>
              </div>
        
              <!-- CASO 3: Alerta NORMAL para el resto de estados -->
              <div *ngSwitchDefault 
                   class="alert mt-2" [ngClass]="{
                    'alert-success': estadoClase === 'exito',
                    'alert-warning': estadoClase === 'advertencia',
                    'alert-info': estadoClase === 'info'
                   }" role="alert">
                <p class="mb-0 fs-5">{{ mensajeEstado }}</p>
              </div>
        
            </div>
            <!-- ========================================================= -->
            <!-- ===           FIN: NUEVA LÓGICA DE ALERTAS              === -->
            <!-- ========================================================= -->

        </div>

        <!-- Plantilla que se muestra si no hay datos -->
        <ng-template #noData>
            <div class="d-flex justify-content-center align-items-center p-5">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <strong class="ms-3 fs-4">{{ mensajeEstado }}</strong>
            </div>
        </ng-template>

        <!-- Consejo de Temperatura Óptima -->
        <div class="mt-4">
            <span class="badge rounded-pill bg-light text-dark p-3">
            <i class="fas fa-info-circle me-2"></i>
            Recuerda: La temperatura óptima para una desinfección exitosa es de 121°C.
            </span>
        </div>
        
        </div>
    
        <div class="card-footer text-muted">
          Los datos se actualizan cada 2 segundos. 
        </div>
    </div>
    
      <div class="text-center mt-4">
 
      <button (click)="volver()" 
        style="background-color: #001f3f; color: #f8f9fa; border-color: #001f3f;" 
        class="btn">
        <i class="fas fa-arrow-left me-2"></i>
        Volver a Detalles de la Herramienta
      </button>

      </div>
</div>