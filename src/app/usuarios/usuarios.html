<!-- RUTA: src/app/usuarios/usuarios.html -->

<div class="tabla-container">
  <h2>Gesti√≥n de Usuarios</h2>
  <table class="tabla-usuarios">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Email</th>
        <th>Rol</th>
        <th *ngIf="currentUserRol === 'admin'">Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of usuarios">
        <td>{{ user.nombre }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.role }}</td>
        <td *ngIf="currentUserRol === 'admin'">
          <button class="btn-delete" (click)="eliminarUsuario(user.id)">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon-trash" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 6h18M8 6v14h8V6M10 6V4h4v2" />
            </svg>
            Eliminar
          </button>

          <button class="btn-role" (click)="mostrarSelector(user.id)">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon-role" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 20v-6M6 20v-4M18 20v-10M4 4h16" />
            </svg>
            Cambiar rol
          </button>

          <!-- Selector visual de rol -->
          <div *ngIf="mostrarSelectRol && selectedUserId === user.id" class="rol-selector">
            <select [(ngModel)]="nuevoRol">
              <option value="" disabled selected>Selecciona un rol</option>
              <option value="admin">Admin</option>
              <option value="user">User</option>
            </select>
            <button (click)="aplicarCambioRol()">Aplicar</button>
          </div>

        </td>
      </tr>
    </tbody>
  </table>
</div>
